import numpy as np
from flask import jsonify
from app.api import bp, mongodb

@bp.route('/rand/')
def get_abstract():
    message = "Welcome to the API :)"
    # doi_fields = list(mongodb.Corpus.find({'_id': {'$regex': '10-*'}},
    #                                                    {'_id':1}))
    #
    # doi_ids = []
    # for doi in doi_fields:
    #     doi_ids.append(doi['_id'])
    # doi_idx = np.random.choice(np.arange(len(doi_ids)), size=1)[0]
    # rand_entry = mongodb.Corpus.find_one({'_id': doi_ids[doi_idx]})
    # rand_entities = mongodb.WebLabeling.find_one({'DOI': doi_ids[doi_idx]})['Entities']
    rand_entry = {'Title': 'Simple method for determination of paraquat in plasma and serum of human patients by high-performance liquid chromatography',
                  'DOI': '10.1016/S1570-0232(02)00245-3',
                  'Abstract': "A simple and fast HPLC system is presented for quantifying paraquat in human plasma and serum using 1,1′-diethyl-4,4′-bipyridyldiylium (diethyl paraquat) as an internal standard. An octadecyl-silica column is used with an eluent of 10% acetonitrile (v/v) containing sodium 1-octanesulphonic acid (3.0 mM) and a diethylamine-orthophosphoric acid buffer (pH 3). Unlike with other techniques, sample treatment requires only the precipitation of protein contents by 6% perchloric acid (v/v) in methanol. The method has a limit of detection of 0.1 μg/ml and is linear up to 10 μg/ml. The serum of four patients and the plasma of one patient with paraquat intoxication's were analysed and positive identification and quantification was readily achieved. One of those patients survived, partially given the rapid disclosure of his levels of paraquat. Therefore, this method is suitable for quantification of paraquat in toxicological samples. It may be used as a prognostic tool in critical case detoxification and to quickly identify potentially salvageable patients for enrolment in new hemofiltration studies."}
    rand_entities = [['entity mol', 59, 67], ['entity mol', 100, 134], ['entity mol', 136, 152], ['entity cpt', 160, 177], ['entity mol', 182, 198], ['entity mol', 236, 248], ['entity mol', 266, 295], ['entity mol', 311, 344], ['entity mol', 465, 480], ['entity mol', 490, 498], ['entity cpt', 517, 535], ['entity mol', 641, 649], ['entity mol', 834, 842], ['entity mol', 901, 909]]
    content = {
        "title": rand_entry['Title'],
        "doi": rand_entry['DOI'],
        "text": rand_entry['Abstract'],
        "entities": rand_entities
    }
    status_dict = {
        "status": 200,
        "success": True,
        "message": message,
        "contentType": 'application/json',
        "content": content
    }
    return jsonify(status_dict), status_dict['status']

@bp.route('/doi_suggestions/')
def get_doi_suggestions():
    dois = []
    with open('flame_retardant_dois.txt', 'r') as f:
        for line in f:
            dois.append(line)
    message = "Welcome to the API :)"
    content = {
        "dois": dois
    }
    status_dict = {
        "status": 200,
        "success": True,
        "message": message,
        "contentType": 'application/json',
        "content": content
    }
    return jsonify(status_dict), status_dict['status']

@bp.route('/<doi>/')
def get_db_entry(doi):
    doi = doi.replace('_', '/')
    message = "You wanna DOI? Here's ya stinking DOI"
    # abstract = 'Snowmelt is known to cause peak concentrations of pollutants which may adversely affect receiving water quality. High concentrations in snow have been shown for e.g. metals and suspended solids, whereas studies on organic pollutants are rarely reported. This study aims ::: at investigating the occurrence of anthropogenic organic compounds in urban snow, and at identifying sources of the pollutants. Snow from sites in Gothenburg, Sweden, was sampled and a range of organic substances was analysed. The most frequently detected organic pollutants in urban snow were polycyclic aromatic hydrocarbons, high molecular-weight ::: phthalates, 4-nonylphenol and 4-octylphenol. Brominated flame retardants and chlorinated paraffins were only sporadically detected. In several snow samples, the concentrations of specific PAHs, alkylphenols and phthalates were higher than reported stormwater concentrations and European water quality standards. Pollutant source identification and sustainable management of snow are important instruments for the mitigation of organic contaminants in the urban environment.'
    # fulltext = {'Body': [{'section': 'INTRODUCTION', 'text': 'Urban snow accumulates pollutants emitted from human activity and acts as a temporary storage of contaminants during sometimes month-long periods. Snowmelt generally occurs during a short time period, which often results in concentration peaks of contaminants in surface runoff and in receiving waters (Meyer & Wania \uf645\uf643\uf643\uf64b) . The transport of pollutants from the snowpack shows distinct peak loads where the dissolved pollutants are released with the initial meltwater fractions and the particulate pollutants at the end of the snowmelt period. Cold periods give rise to increased emission of certain pollutants due to heating, cold starting of engines, and increased tyre and road wear resulting from studded tyres and the use of road salt and sand (Oberts et al. \uf645\uf643\uf643\uf643) . Snowmelt studies show that levels of metals and suspended solids may be several orders of magnitudes higher than pollutant loads in raininduced runoff (Westerlund & Viklander \uf645\uf643\uf643\uf649) . The highest concentrations of metals are often observed in snow in city centers, particularly close to heavily trafficked roads (Viklander \uf644\uf64c\uf64c\uf64c; Oberts et al. \uf645\uf643\uf643\uf643) . However, organic contaminants in urban snow have not been studied to the same extent. The occurrence of, for example, perfluorinated compounds (Liu et al. \uf645\uf643\uf643\uf64c) , and polycyclic aromatic hydrocarbons (PAHs) (Reinosdotter et al. \uf645\uf643\uf643\uf649) in urban snow has occasionally been reported. Screening studies of snow, where several groups of organic contaminants are investigated, are even more infrequent. Screenings of organic substances have earlier been performed on e.g. river water (Dsikowitzky et al. \uf645\uf643\uf643\uf647) and landfill leachate (Paxéus \uf645\uf643\uf643\uf643) . These studies have identified a wide range of organic contaminants, including, for example, aliphatics, aromatics, phenols, and chlorinated compounds, emitted from urban areas.', 'cite_spans': [], 'ref_spans': []}, {'section': 'INTRODUCTION', 'text': 'This study aims at investigating the occurrence of anthropogenic organic compounds in urban snow in Gothenburg (Sweden). Initially, non-target screenings of semi-volatile organic compounds (SVOCs) were performed, and thereafter target analyses of specific compound groups were carried out. These target compounds were selected according to their potential to reach the urban stormwater system and their potential effects in the aquatic environment.', 'cite_spans': [], 'ref_spans': []}, {'section': 'INTRODUCTION', 'text': 'of the winter season. Roadside snow samples were collected in 2009 and 2010 from three sites in Gothenburg: Kärra (geographic coordinates 57.79N, 12.00E)suburban area, estimated annual average daily traffic (AADT) 500 vehicles; Gårda (57.70N, 12.00E)urban motorway area, AADT 90 000; and Järnbrott (57.65N, 11.93E)access road to residential and industrial area, AADT 59 000. At the end of the snowmelt period, samples were collected at three snow deposits (Gårdamotet (57.70N, 12.00E), Heden (57.70N, 11.98E) and Vallhamra (57.72N, 12.08E)). An urban background sample was collected in the Delsjön forest area (57.69N, 12.03E) circa two kilometres from the city centre. Snow sampled in February 2009 had fallen during one day, five days prior to sampling. In 2010, Gothenburg experienced several snowfall occasions and samples were collected on three occasions (Figure 1). summarizes the performed analyses with respect to sampling site and date. The snow was collected in solvent-rinsed glass containers with Teflon-lined caps or in stainless steel containers. The snow was thawed at room temperature before solid phase extraction (see non-target screening) and before being sent in coolers to the accredited laboratories the following day (see target analyses).', 'cite_spans': [], 'ref_spans': [{'start': 873, 'end': 880, 'text': 'Table 1', 'ref_id': 'TABREF0'}]}, {'section': 'Non-target screening', 'text': 'The thawed samples (∼1.5 L) were spiked with internal standard (phenanthrene-d 10 and 2-fluorobiphenyl) and extracted by solid phase extraction using C 18 discs (3 M Empore). The contaminants were eluted with isopropanol and n-heptane. The extracts were dried with Na 2 SO 4 and evaporated before analysis on an ion-trap GC-MS (CP-3200 and Saturn 2200, Varian), equipped with a fused silica (VF-5 ms) capillary column (30 m × 0.25 mm × 0.25 μm). Chromatographic conditions were: 1 μL split/splitless injection (290 W C), initial oven temperature 50 W C, 5 min hold, programmed to 290 W C at a rate of 5 W C/min. Helium was used as carrier gas (1 mL/min), and the transfer line and trap temperatures were set to 250 W C and 220 W C, respectively.', 'cite_spans': [], 'ref_spans': []}, {'section': 'Non-target screening', 'text': 'The mass spectrometer performed a full scan from m/z 40 to 450. Identification was based on a comparison of chromatographic retention times and mass spectra of analytes with those of reference compounds and spectral databases (NIST/EPA/NIH Mass Spectral Library 2005). For quantification of analytes, three-point calibration curves were used. Procedural blanks were treated identically with the snow samples, from extraction to analysis.', 'cite_spans': [], 'ref_spans': []}, {'section': 'Target analyses of organic contaminants', 'text': 'Analyses of alkylphenols, brominated flame retardants, chlorinated paraffins, perfluorinated compounds, phthalates and PAHs were performed by accredited commercial laboratories. The methods for extraction, clean-up and analysis are summarized in . ', 'cite_spans': [], 'ref_spans': [{'start': 246, 'end': 253, 'text': 'Table 2', 'ref_id': 'TABREF1'}]}, {'section': 'RESULTS AND DISCUSSION', 'text': '', 'cite_spans': [], 'ref_spans': []}, {'section': 'Non-target screening', 'text': 'The original aim of the non-target screening was to identify and quantify the most abundant pollutants in each snow sample. However, the identification was obstructed by the large number of peaks in the total ion chromatograms, implying that the samples contain a multitude of different compounds, presumably of anthropogenic origin. All samples also showed an unresolved complex mixture, often used as an indication of petroleum-derived contamination, which prevented identification and quantification of peaks in the latter part of the chromatogram. However, we could clearly identify specific phthalates (DiBP, DnBP, BBP and DEHP), benzothiazole, several phenols (e.g. t-butylphenol, butylated hydroxytoluene and 2,4-di-t-butylphenol) and PAHs in the snow samples. In addition, concentrations of SVOCs and total petroleum hydrocarbons (TPHs) were determined. The highest concentrations (6.0 mg TPHs/L and 8.0 mg SVOCs/L) were detected in the motorway area (Gårda), and the lowest concentrations (1.6 mg/L for both TPHs and SVOCs) were found in the residential area (Kärra).', 'cite_spans': [], 'ref_spans': []}, {'section': 'Alkylphenols', 'text': 'The highest maximum and median AP concentrations ) were observed for 4-NP (6.2 and 0.27 μg/L, respectively), whereas 4-t-OP showed the highest detection frequency (82%). Nonylphenols are used in larger amounts than octylphenols and the trend of higher NP concentrations have been observed in environmental matrices world-wide (Ying et al. \uf645\uf643\uf643\uf645) . The OPEOs were below the Nonylphenol is the precursor in the production of ethoxylates, and also a major degradation product of NPEOs, which is one of the most used surfactant groups world-wide. Abiotic degradation of NPEOs is considered to be negligible in comparison to biodegradation (Langford et al. \uf645\uf643\uf643\uf648) , which is likely to be inhibited by the prevailing temperatures at the time of snow sampling. The high concentrations of 4-NP in snow, compared to NPEOs, and the expected low degradation of NPEOs into NP, suggest that 4-NP may be emitted directly to the urban environment. Vehicles, where nonylphenolic compounds are used in, for example, lubricants, tyre rubber and car care products, and air-entraining additives for concrete have been identified as the most important NP and NPEO sources in stormwater (Björklund \uf645\uf643\uf644\uf643) . The ethoxylates may also be used in de-icing products and have been suggested as additives in diesel, but reports on the use of 4-NP in such products have not been found. Only 2% of the total consumption of OP is used to produce ethoxylates and the remaining part is used in the manufacturing of resins (DEFRA \uf645\uf643\uf643\uf64b). Circa 80% of the resins are used in the production of tyres, which suggests that the octylphenol found in urban snow mainly originates from tyre rubber. Other applications of octylphenolic compounds include paints, polymers and cleaning products.', 'cite_spans': [], 'ref_spans': [{'start': 49, 'end': 61, 'text': '(Figure 2(a)', 'ref_id': 'FIGREF2'}]}, {'section': 'Brominated flame retardants', 'text': 'The most used BFR in Sweden is currently TBBPA, followed by decaBDE and HBCDD (KemI \uf645\uf643\uf644\uf643). The use of decaBDE is, unlike penta-and octaBDE, not regulated in Sweden. It is therefore somewhat surprising that the BFRs detected in urban snow ) were pentaBDE-99 (n ¼ 3; 0.0015-0.014 μg/L), pentaBDE-100 (n ¼ 1; 0.001 μg/L), and tetraBDE-47 (n ¼ 4; 0.0019-0.0097 μg/L), the latter being the most frequently occurring congener in pentaBDE. The commercial mixtures of pentaBDE include tetra-, penta-and hexa congeners; octaBDE includes hexa-, hepta-, octa-and nonaBDE; whereas decaBDE only includes small amounts of nonaBDE (de Wit \uf645\uf643\uf643\uf645). A phase-out of the production and use of pentaBDE in Sweden started in 1999 (KemI \uf645\uf643\uf643\uf646). Since 2004, the use has been restricted within the European Union (Directive 2003/11/EC) and pentaBDE is currently found only in imported goods. The main application of pentaBDE is in polyurethane foam found in, for example, furniture and car headrests and ceilings. Other applications of pentaBDE include textiles, building materials and packaging. Historically, tetraBDE-47 has been the most frequently occurring congener in environmental matrices from areas generally affected by pollution (de Wit \uf645\uf643\uf643\uf645). However, studies from the past decade indicate that decaBDE-209 is currently the most frequently occurring congener in the Swedish environment (ter Schure et al. \uf645\uf643\uf643\uf647). This congener was not detected in urban snow, but it should be noted that the analytical d.l. was higher for decaBDE (up to 0.10 μg/L) than for tetra-and pentaBDE (up to 0.010 μg/L). The EQS for brominated diphenylethers -AA 0.0005 μg/L for congener numbers 28, 47, 99, 100, 153 and 154were exceeded in all five samples where these substances were above the d.l.', 'cite_spans': [], 'ref_spans': [{'start': 238, 'end': 250, 'text': '(Figure 2(b)', 'ref_id': 'FIGREF2'}]}, {'section': 'Brominated flame retardants', 'text': 'Background concentrations of Σpolybrominated diphenylethers (PBDEs, varying number of congeners included) in rain and bulk precipitation in Sweden have been detected in the low nanogram-per-litre-range (ter Schure et al. \uf645\uf643\uf643\uf647). The PBDE concentrations in urban snow are similar to the levels found in precipitation, which suggest that the PBDEs in snow may originate from atmospheric deposition. No other studies on the occurrence of BFRs in urban snow or stormwater have been found. The d.l.s of HBCDD and TBBPA in the current study (up to 0.10 μg/L) are presumably too high compared to expected environmental concentrations (Remberger et al. \uf645\uf643\uf643\uf645; \uf645\uf643\uf643\uf647) and the substances were below the d.l. in all samples.', 'cite_spans': [], 'ref_spans': []}, {'section': 'Chlorinated paraffins', 'text': 'The use of CPs has decreased by 80% in Sweden since 1994, although a substance flow analysis revealed that the largest emissions into the environment derive from large stocks of CPs in the urban area (Fridén & McLachlan \uf645\uf643\uf643\uf64a). Shortchained and medium-chained CPs were detected in two snow deposit samples (Heden and Gårdamotet) at 0.33 and 32 μg/L, respectively. The analytical d.l.s of SCCPs and MCCPs were 0.20-5.0 μg/L (the higher value in one sample with large matrix effects), whereas many reported concentrations found in natural waters are in the nanogram-per-litre-range (Bayen et al. \uf645\uf643\uf643\uf649) .', 'cite_spans': [], 'ref_spans': []}, {'section': 'Perfluorinated compounds', 'text': 'Perfluorinated alkylsulfonates (PFASs) and perfluorinated carboxylates (PFCAs) are two major PFC classes of environmental concern (KemI \uf645\uf643\uf643\uf649; Kim & Kannan \uf645\uf643\uf643\uf64a; Fromme et al. \uf645\uf643\uf643\uf64c) . The most studied PFAS is PFOS, which is considered to be the final degradation product of many commercially used sulfonated fluorochemicals, including PFOSA. PFOS is shown to be exceptionally persistent in the environment. The most studied caboxylate, PFOA, is also persistent and has shown carcinogenicity and reproductive toxicity.', 'cite_spans': [], 'ref_spans': []}, {'section': 'Perfluorinated compounds', 'text': 'PFOA and PFOSA were detected in four and PFOS in five out of eight snow samples ). PFOS and PFOA are the most frequently detected PFCs in many environmental studies world-wide. The concentrations found in this study (<d.l. Other potential sources in snow and runoff include impregnated snack and food wrappings, and water-and dirt-resistant products for shoes and clothes, which is the major application area for PFCs in Sweden (KemI \uf645\uf643\uf643\uf649). The high PFOSA concentrations, compared to PFOS and PFOA, may be an indication of point sources. PFOSA is a major metabolite of N-alkylperfluorosulfonamides, which have been used in paper and packaging applications and surface treatment of, for example, carpets and textiles (Fromme et al. \uf645\uf643\uf643\uf64c) . However, specific point sources of PFOSA have not been identified in the sampling area.', 'cite_spans': [], 'ref_spans': [{'start': 80, 'end': 92, 'text': '(Figure 2(c)', 'ref_id': 'FIGREF2'}]}, {'section': 'Phthalates', 'text': 'The most frequently occurring phthalates in urban snow samples were DnBP, DiBP, DINP, DIDP and DEHP (detection frequency 55, 55, 91, 91 and 100%, respectively ). The DEHP concentrations in snow ( (\uf645\uf643\uf643\uf64c) showed strong correlation between the relative phthalate distribution in stormwater sediment and the current phthalate use in Sweden, which is dominated by DINP and DIDP. The current study further strengthens the theory that DINP and DIDP are the phthalates occurring at the highest concentrations in urban matrices in Sweden.', 'cite_spans': [], 'ref_spans': [{'start': 159, 'end': 171, 'text': '(Figure 2(d)', 'ref_id': 'FIGREF2'}]}, {'section': 'Phthalates', 'text': 'A substance flow analysis of phthalates revealed that traffic is an important source of these substances in stormwater (Björklund \uf645\uf643\uf644\uf643) . Phthalates may be emitted from applications of soft PVC, which is the main use for the high molecular-weight phthalates, car undercoating, sealants, rubber, and paints. Other phthalate sources include coated roofing and cladding, tarpaulins, cables, shoe and textile wear. Coated roofing and cladding materials are believed to be minor sources of phthalates in the roadside snow, since all samples were collected far from buildings.', 'cite_spans': [], 'ref_spans': []}, {'section': 'Polycyclic aromatic hydrocarbons', 'text': 'The Gårdamotet snow deposit showed the highest total PAH concentrations at 15 μg/L, which is at least 2.5 times higher than the concentrations found in the rest of the samples and 2(f)). A study on stormwater quality in Gårda (Pettersson et al. \uf645\uf643\uf643\uf648) showed total PAH concentrations that are comparable to the concentrations found in roadside snow in this area (∼2 μg/L). The concentrations found in the current study are generally within the range of other reported snow studies (Viskari et al. \uf644\uf64c\uf64c\uf64a; Lindgren \uf644\uf64c\uf64c\uf64b) . The European EQS for BaP in surface waters -MAC 0.1 μg/Lwas exceeded in five samples; the EQS for ANT -AA 0.1 μg/Lwas exceeded in the Gårdamotet snow deposit sample; the EQS for BbF þ BkF and FLR -AA 0.03 and 0.1 μg/L, respectivelywere exceeded in all samples, except the background sample; and the EQS for BPY þ INP -AA 0.002 μg/Lwas exceeded in all samples.', 'cite_spans': [], 'ref_spans': [{'start': 176, 'end': 189, 'text': '(Figures 2(e)', 'ref_id': 'FIGREF2'}]}, {'section': 'Polycyclic aromatic hydrocarbons', 'text': 'The PAHs generally detected at the highest concentrations, and also the most frequently occurring, were PYR, PHE, FLR and BPY ). The maximum detected concentration was found for BPY (3.1 μg/L) in the Gårdamotet deposit sample, whereas PYR generally showed higher concentrations in other samples. Among the US EPA classified carcinogenic PAHs, the most frequently occurring, and also the substances detected at the highest concentrations, were BbF, INP and CHY. The highest concentration was found for INP (1.5 μg/L) in Gårdamotet, whereas BbF generally showed higher concentrations in other samples. Similar trends of occurrence of PAHs have been observed in other studies of roadside snow (Viskari et al. \uf644\uf64c\uf64c\uf64a; Reinosdotter et al. \uf645\uf643\uf643\uf649) .', 'cite_spans': [], 'ref_spans': [{'start': 126, 'end': 148, 'text': '(Figures 2(e) and 2(f)', 'ref_id': 'FIGREF2'}]}, {'section': 'Polycyclic aromatic hydrocarbons', 'text': 'Ravindra et al. (\uf645\uf643\uf643\uf64b) reviewed PAH source studies and summarized that PYR, FLR and PHEthe most abundant PAHs in the current studyhave been suggested as source markers for incineration and vehicular emissions, including both diesel and petrol. Oil combustion and wood burning have also been suggested as possible sources of PYR, FLR and PHE. The PAH content in urban snow was compared with PAH profiles for petrol and diesel, lubricating oil, tyre rubber, bitumen and asphalt. Moderate to strong correlations were seen between roadside snow and tyre rubber [r ∼ 0.7-0.9 (Lindgren \uf644\uf64c\uf64c\uf64b; Edeskär \uf645\uf643\uf643\uf647)] and lubricating oil [r ∼ 0.6 (Wang et al. \uf645\uf643\uf643\uf643)].', 'cite_spans': [], 'ref_spans': []}, {'section': 'CONCLUSIONS', 'text': '• Because of generally long accumulation time, significant pollutant loads can be expected in a snow pack. Snow may therefore be useful for monitoring the occurrence of contaminants expected to be found in low concentrations. This can be advantageous in qualitative studies of organic pollutants, such as the current screening study, where the primary aim is to investigate the occurrence of specific pollutants.', 'cite_spans': [], 'ref_spans': []}, {'section': 'CONCLUSIONS', 'text': '• The snow sampled in Gothenburg contained a multitude of analytes with varying properties. Further fractionation and clean-up are therefore necessary steps to successfully identify specific pollutants in a non-target screening of SVOCs.', 'cite_spans': [], 'ref_spans': []}, {'section': 'CONCLUSIONS', 'text': '• The most frequently detected pollutants in urban snow samples were PAHs, high molecular-weight phthalates, 4-nonylphenol and 4-t-octylphenol. Brominated flame retardants and chlorinated paraffins were less frequently detected in urban snow samples.', 'cite_spans': [], 'ref_spans': []}, {'section': 'CONCLUSIONS', 'text': '• The snow was grab sampled and pollutant concentrations from different years and sites may not be comparable due to different climatic conditions, land use, snow-handling activities and changes in traffic intensity. In addition, the generation of pollutants in roadside snow and snow deposits is not comparable. It is suggested that future studies include quantification of pollutant build-up with time at different sites to obtain a deeper understanding of the relationship between pollutant concentrations in snow and, for example, climatic conditions or land use. To obtain reliable results, this will require regular and continuous sampling of snow during the entire snow period.', 'cite_spans': [], 'ref_spans': []}, {'section': 'CONCLUSIONS', 'text': '• Since detected concentrations of APs, brominated diphenylethers, DEHP and PAHs in urban snow samples repeatedly exceeded water quality standards, it is suggested that urban snow be deposited at sites where the meltwater is controlled and treated prior to discharge into natural waters.', 'cite_spans': [], 'ref_spans': []}], 'RefEntries': {'FIGREF0': {'text': 'Weather data for Gothenburg during the winter 2010. The sampling occasions are marked with arrows.', 'type': 'figure'}, 'FIGREF1': {'text': '); acenaphthylene (ACY); acenaphthene (ACE); fluorene (FL); phenanthrene (PHE); anthracene (ANT); fluoranthene (FLR); pyrene (PYR); benzo[a] anthracene (BaA); chrysene (CHY); benzo-[b]fluoranthene (BbF); benzo[k]fluoranthene (BkF); benzo[a]pyrene (BaP); dibenzo[a,h]anthracene (DBA); benzo[ghi]perylene (BPY); indene[1,2,3-cd]pyrene (INP) Extracted with n-hexane. GC-MS 0.01 and 0.1 μg/L a Analysis accredited by Swedac (The Swedish Board for Accreditation and Conformity Assessment). Measurement errors have been reported (not shown).detection limit (d.l.) in all samples, whereas NP1EO and NP2EO were detected in four of the samples, and NP3EO and NP4EO in one sample(Figure 2(a)). For the snow deposit samples (Heden, Vallhamra and Gårdamotet), the d.l.s were elevated (up to 2.0 μg/L for 4-NP and 12 μg/L for NP4EO) due to large matrix effects, and all APs were below the d.l. in the sample from Vallhamra. The fluctuating detection levels render sample comparison difficult and it', 'type': 'figure'}, 'FIGREF2': {'text': 'Detected concentrations of (a) alkylphenols; (b) brominated flame retardants; (c) perfluorinated compounds; (d) phthalates; (e) lower molecular-weight PAHs and (f) higher molecular-weight PAHs. Sampling occasions when concentrations of all APs, PFCs and BFRs are below the d.l. are not shown in the graphs. Sampling sites: J -Järnbrott; G -Gårda; K -Kärra; V -Vallhamra; H -Heden; GM -Gårdamotet; D -Delsjön. 209 K. Björklund et al. | Screening of organic contaminants in urban snow Water Science & Technology | 64.1 | 2011 has not been possible to identify clear trends in the detected concentrations. It can be concluded, though, that the 4-NP and 4-t-OP concentrations found in snow exceeded most reported concentrations found in stormwater in Sweden (maximum 1.2 and 0.35 μg/L, respectively; n ¼ 13 (Björklund et al. \uf645\uf643\uf643\uf64c)). The European environmental quality standard (EQS) for surface water (Directive 2008/105/EC of the European Parliament and of the Council) for 4-NPmaximum allowable concentration (MAC) 2.0 μg/Lwas exceeded in three of the samples. The EQS for 4-t-OPannual average (AA, considered protective against shortterm pollution peaks) 0.1 μg/Lwas exceeded in five of the snow samples.', 'type': 'figure'}, 'FIGREF3': {'text': '-9.0 and <d.l. -36 ng/L, respectively) are lower or in the same range as those detected in stormwater in Japan (Murakami et al. \uf645\uf643\uf643\uf64c; Zushi & Masunaga \uf645\uf643\uf643\uf64c); rain and snow-induced runoff in the US (Kim & Kannan \uf645\uf643\uf643\uf64a); and comparably lower than concentrations found in fresh snow in China (Liu et al. \uf645\uf643\uf643\uf64c). The median concentrations of PFOS and PFOA in urban snow samples (0.81 and 2.3 ng/L, respectively) are similar to concentrations detected in precipitation in Sweden (median 2.2 and 3.1 ng/L, respectively (Woldegiorgis et al. \uf645\uf643\uf643\uf649)). On the contrary, the detected PFOSA concentrations in snow (maximum 66 ng/L) are one magnitude higher than most reported concentrations in stormwater and rain (Woldegiorgis et al. \uf645\uf643\uf643\uf649; Kim & Kannan \uf645\uf643\uf643\uf64a; Murakami et al. \uf645\uf643\uf643\uf64c). In addition, PFOSA concentrations which are, on occasion, several times higher than PFOS and PFOA concentrations have not been observed in the referred studies. Studies by Kim & Kannan (\uf645\uf643\uf643\uf64a) and Zushi & Masunaga (\uf645\uf643\uf643\uf64c) have revealed positive correlation between high PFCs concentrations in stormwater and transportation-related land use. The PFCs are added to several transportation-related products, such as car care products, water and dirt repellent carseat textiles, upholstery and windshield washer fluids (KemI \uf645\uf643\uf643\uf649; Murakami et al. \uf645\uf643\uf643\uf64c).', 'type': 'figure'}, 'FIGREF4': {'text': "2.3-96 μg/L) exceeded the EQS of 1.3 μg/L in surface waters. The highest phthalate concentrations were found in snow sampled in Järnbrott in March 2010, with maximum concentrations at 260 μg/L for DINP and 81 μg/l for DIDP. Compared to studies of urban stormwater from Sweden and Austria (Björklund et al. \uf645\uf643\uf643\uf64c; Clara et al. \uf645\uf643\uf644\uf643), the snow samples show higher maximum concentrations of all phthalates, except DMP and DEP. The contribution of DINP to the total phthalate concentration exceeded 40% in all samples, except the samples from Gårdamotet and Delsjön. Björklund et al. (\uf645\uf643\uf643\uf64c) and Clara et al. (\uf645\uf643\uf644\uf643) showed similar results; high detected concentrations of DIDP, DINP and DEHP compared to most low molecular-weight phthalates. Within the European Union, the use of DEHP is currently restricted due to the substance's toxic effects and DINP and DIDP have replaced DEHP in many applications (KemI \uf645\uf643\uf644\uf643). Björklund et al.", 'type': 'figure'}, 'TABREF0': {'text': 'Performed analyses with respect to sampling site and date', 'type': 'table'}, 'TABREF1': {'text': 'Chemical names, analytical methods and d.l. for the target compounds', 'type': 'table'}}}
    # keywords = ['coating', 'molecular', 'base', 'deposition', 'steel', 'chemical', 'organic', 'polymer', 'degradation', 'inhibit']
    # metadata = {'Field': ['Environmental Science', 'Chemistry', 'Medicine'], 'Authors': [{'first': 'Karin', 'middle': [], 'last': 'Björklund', 'suffix': ''}, {'first': 'Ann-Margret', 'middle': [], 'last': 'Strömvall', 'suffix': ''}, {'first': 'Per-Arne', 'middle': [], 'last': 'Malmqvist', 'suffix': ''}], 'PubYear': 2011, 'JournalName': 'Water science and technology : a journal of the International Association on Water Pollution Research', 'Source': 'stork', 'RawType': 'pdf/latex'}
    # title = 'Screening of organic contaminants in urban snow'
    entry = mongodb.Corpus.find_one({'_id': doi})
    title = entry['Title']
    abstract = entry['Abstract']
    try:
        fulltext = entry['FullText']
    except KeyError:
        fulltext = {'Body': [], 'RefCites': []}
    try:
        keywords = entry['Keywords']
    except KeyError:
        keywords = []
    metadata = entry['MetaData']
    content = {
        "title": title,
        "doi": doi,
        "abstract": abstract,
        "fulltext": fulltext,
        "keywords": keywords,
        "metadata": metadata
    }
    status_dict = {
        "status": 200,
        "success": True,
        "message": message,
        "contentType": 'application/json',
        "content": content
    }
    return jsonify(status_dict), status_dict['status']
